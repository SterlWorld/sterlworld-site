<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SterlWorld - Cinematic Starfield Experience</title>

<style>
  /* Reset and fonts */
  body, html {
    margin: 0; padding: 0; overflow: hidden; background: black; color: white;
    font-family: 'Orbitron', sans-serif;
    user-select: none;
  }

  #loader {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    background: black; display: flex; flex-direction: column;
    align-items: center; justify-content: center; z-index: 9999;
  }

  #loadingText {
    font-size: 2.2rem; margin-bottom: 1rem; letter-spacing: 0.15em;
    color: #fff;
    text-shadow: 0 0 10px #ffec8b, 0 0 20px #ffec8b;
  }

  #title {
    font-size: 3.8rem; letter-spacing: 0.12em;
    display: flex;
    justify-content: center;
    margin-bottom: 1rem;
    user-select: none;
  }

  #title span {
    position: relative;
    display: inline-block;
    padding: 0 4px;
    color: #999; /* base dim color */
    transition: color 0.3s ease, text-shadow 0.3s ease;
  }

  /* Glowing letter */
  #title span.glow {
    color: #ffec8b;
    text-shadow:
      0 0 8px #ffec8b,
      0 0 15px #ffe57f,
      0 0 25px #ffec8b,
      0 0 40px #fff2a6;
    animation: glowPulse 2s ease-in-out infinite alternate;
  }

  @keyframes glowPulse {
    0% {
      text-shadow:
        0 0 6px #ffec8b,
        0 0 12px #ffe57f,
        0 0 20px #ffec8b,
        0 0 30px #fff2a6;
    }
    100% {
      text-shadow:
        0 0 15px #fffcc7,
        0 0 30px #fffecb,
        0 0 45px #fffecb,
        0 0 70px #fff;
    }
  }

  #loadingBar {
    width: 80vw; max-width: 700px;
    height: 20px;
    border-radius: 12px;
    background: #222;
    box-shadow: inset 0 0 12px #ffec8b;
    position: relative;
    overflow: hidden;
    margin-bottom: 1.4rem;
  }

  #barFill {
    height: 100%;
    width: 0;
    background: linear-gradient(90deg, #ffec8b, #ffe57f, #ffec8b, #ffe57f, #ffec8b);
    background-size: 300% 100%;
    box-shadow: 0 0 30px #ffec8b, 0 0 50px #ffe57f, 0 0 70px #ffec8b;
    filter: drop-shadow(0 0 20px #ffec8b) brightness(1.8);
    border-radius: 12px;
    transition: width 0.15s ease-out;
    animation: gradientShift 5s linear infinite;
  }

  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    100% { background-position: 300% 50%; }
  }

  /* Logo styles */
  #logo-wrapper {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    opacity: 0;
    filter: drop-shadow(0 0 25px #ffec8b);
    transition: opacity 1s ease, top 2.4s ease;
    z-index: 10;
  }

  #logo-wrapper.float-top {
    top: 60px;
    transform: translateX(-50%);
  }

  #logo {
    width: 240px;
    max-width: 80vw;
    user-select: none;
    filter: drop-shadow(0 0 25px #ffec8b);
    animation: logoPulse 3.2s ease-in-out infinite alternate;
  }

  @keyframes logoPulse {
    0%, 100% {
      filter: drop-shadow(0 0 20px #ffec8b);
    }
    50% {
      filter: drop-shadow(0 0 45px #fff4a0);
    }
  }

  /* Under construction text */
  #constructionText {
    position: fixed;
    top: 110px;
    width: 100%;
    text-align: center;
    font-family: 'Poppins', sans-serif;
    color: #ffe57f;
    font-size: 1.4rem;
    opacity: 0;
    transition: opacity 1.8s ease;
    user-select: none;
    text-shadow:
      0 0 10px #ffe57f,
      0 0 20px #ffec8b;
    z-index: 10;
  }

  #constructionText.visible {
    opacity: 1;
  }

  /* Star sparkle on click */
  .click-star {
    position: fixed;
    width: 16px;
    height: 16px;
    pointer-events: none;
    background-image: url('star.png');
    background-size: contain;
    background-repeat: no-repeat;
    filter: drop-shadow(0 0 6px #fff9c4);
    animation: sparklePop 0.9s ease forwards;
    will-change: transform, opacity;
    z-index: 999;
  }

  @keyframes sparklePop {
    0% {
      transform: scale(0.6) rotate(0deg);
      opacity: 1;
    }
    80% {
      opacity: 1;
    }
    100% {
      transform: scale(1.8) rotate(360deg);
      opacity: 0;
    }
  }

  /* Starburst explosion stars */
  .explosion-star {
    position: fixed;
    width: 8px;
    height: 8px;
    background-image: url('star.png');
    background-size: contain;
    background-repeat: no-repeat;
    pointer-events: none;
    filter: drop-shadow(0 0 10px #fff);
    will-change: transform, opacity;
    z-index: 20;
  }

  /* Starfield stars */
  .starfield-star {
    position: fixed;
    width: 4px;
    height: 4px;
    background-image: url('star.png');
    background-size: contain;
    background-repeat: no-repeat;
    filter: drop-shadow(0 0 6px #ffd700);
    pointer-events: none;
    will-change: transform, opacity;
    z-index: 1;
  }

  /* Responsive tweaks */
  @media (max-width: 600px) {
    #loadingText {
      font-size: 1.6rem;
    }
    #title {
      font-size: 2.8rem;
      margin-bottom: 0.8rem;
    }
    #loadingBar {
      height: 16px;
    }
    #logo-wrapper {
      width: 160px;
      filter: drop-shadow(0 0 18px #ffec8b);
    }
    #constructionText {
      font-size: 1.1rem;
      top: 90px;
    }
  }

</style>

</head>
<body>

<!-- Loader UI -->
<div id="loader" aria-label="Loading SterlWorld experience" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
  <div id="loadingText">LOADING...</div>
  <div id="title" aria-live="polite" aria-atomic="true" aria-relevant="text"></div>
  <div id="loadingBar" aria-hidden="true">
    <div id="barFill"></div>
  </div>
</div>

<!-- Main Content -->
<div id="logo-wrapper" aria-hidden="true" role="banner">
  <img id="logo" src="https://raw.githubusercontent.com/SterlWorld/sterlworld-site/refs/heads/main/SterlWorld_Logo.png" alt="SterlWorld Logo" />
</div>
<div id="constructionText" aria-hidden="true">⭐ Site Under Construction — Cosmic Journey Incoming ⭐</div>

<script>
(() => {
  const isMobile = /Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent);
  const sparkleColors = ['#fff9c4', '#ffec8b', '#ffe57f', '#fff'];
  const w = window.innerWidth;
  const h = window.innerHeight;

  const loader = document.getElementById('loader');
  const loadingText = document.getElementById('loadingText');
  const loadingBar = document.getElementById('loadingBar');
  const barFill = document.getElementById('barFill');
  const title = document.getElementById('title');
  const logoWrapper = document.getElementById('logo-wrapper');
  const logo = document.getElementById('logo');
  const constructionText = document.getElementById('constructionText');

  // Create the letters for "STERLWORLD"
  const titleText = 'STERLWORLD';
  let titleLetters = [];
  function createTitleLetters() {
    title.textContent = '';
    titleLetters = [];
    for (let char of titleText) {
      const span = document.createElement('span');
      span.textContent = char;
      title.appendChild(span);
      titleLetters.push(span);
    }
  }
  createTitleLetters();

  // Animate progress bar and sync letter glow
  let progress = 0;

  function updateAriaProgress() {
    loader.setAttribute('aria-valuenow', Math.round(progress));
  }

  function updateLetterGlow() {
    const barRect = loadingBar.getBoundingClientRect();
    const fillWidth = barFill.offsetWidth;
    titleLetters.forEach((letter) => {
      const letterRect = letter.getBoundingClientRect();
      const letterCenterX = letterRect.left + letterRect.width / 2;
      // If progress bar fill crosses letter center, glow it
      if (letterCenterX <= (barRect.left + fillWidth)) {
        letter.classList.add('glow');
      }
    });
  }

  // Star sparkle on click handler
  function createClickStar(x, y) {
    const star = document.createElement('div');
    star.classList.add('click-star');
    star.style.left = `${x - 8}px`;
    star.style.top = `${y - 8}px`;
    star.style.filter = `drop-shadow(0 0 10px ${sparkleColors[Math.floor(Math.random() * sparkleColors.length)]})`;
    document.body.appendChild(star);
    setTimeout(() => star.remove(), 900);
  }

  document.addEventListener('click', (e) => {
    createClickStar(e.clientX, e.clientY);
  });

  // Starfield setup (both mobile and desktop)
  let stars = [];
  let starfieldAnimationFrameId = null;

  function createStarElement(size = 4) {
    const star = document.createElement('div');
    star.classList.add('starfield-star');
    star.style.width = size + 'px';
    star.style.height = size + 'px';
    return star;
  }

  function createStar() {
    const star = createStarElement(4 + Math.random() * 4);
    document.body.appendChild(star);
    return {
      x: (Math.random() - 0.5) * w * 1.5,
      y: (Math.random() - 0.5) * h * 1.5,
      z: w + Math.random() * w,
      size: Math.random() * 0.8 + 0.4,
      rotationAngle: Math.random() * Math.PI * 2,
      rotationSpeed: (Math.random() - 0.5) * 0.02,
      domElement: star,
      isLiving: true
    };
  }

  function initStarfield(count = 140) {
    for (let i = 0; i < count; i++) {
      stars.push(createStar());
    }
  }

  function animateLivingStarfield() {
    let lastTime = performance.now();
    function animate(time = performance.now()) {
      const delta = (time - lastTime) / 16.67;
      lastTime = time;
      stars.forEach((s) => {
        if (s.domElement && s.isLiving) {
          s.z -= 0.7 * delta;
          if (s.z <= 0) {
            s.x = (Math.random() - 0.5) * w * 1.5;
            s.y = (Math.random() - 0.5) * h * 1.5;
            s.z = w + Math.random() * w * 0.5;
            s.size = Math.random() * 0.8 + 0.4;
          }
          const k = 128.0 / s.z;
          const px = s.x * k + w/2;
          const py = s.y * k + h/2;
          if (px < -100 || px >= w + 100 || py < -100 || py >= h + 100) {
            s.x = (Math.random() - 0.5) * w * 1.5;
            s.y = (Math.random() - 0.5) * h * 1.5;
            s.z = w + Math.random() * w * 0.5;
            return;
          }
          const starSize = s.size * (1 - s.z / w) * 35;
          const opacity = Math.min(1, (1 - s.z / w) * 2.2);
          s.domElement.style.left = `${px - starSize/2}px`;
          s.domElement.style.top = `${py - starSize/2}px`;
          s.domElement.style.width = `${starSize}px`;
          s.domElement.style.height = `${starSize}px`;
          s.domElement.style.opacity = opacity;
          s.domElement.style.transform = `rotate(${s.rotationAngle * 180/Math.PI}deg)`;
          const glowIntensity = Math.max(8, starSize * 0.7);
          const brightness = 1.4 + (starSize * 0.02);
          const hueShift = Math.sin(time * 0.001 + s.rotationAngle) * 30;
          s.domElement.style.filter = `
            drop-shadow(0 0 ${glowIntensity}px #ffd700)
            brightness(${brightness})
            saturate(2)
            hue-rotate(${hueShift}deg)
          `;
          s.rotationAngle += s.rotationSpeed;
        }
      });
      starfieldAnimationFrameId = requestAnimationFrame(animate);
    }
    if (starfieldAnimationFrameId) cancelAnimationFrame(starfieldAnimationFrameId);
    starfieldAnimationFrameId = requestAnimationFrame(animate);
  }

  // Explosion star for desktop starburst effect
  let explosionStars = [];

  function createExplosionStar(x, y, size, color) {
    const star = document.createElement('div');
    star.classList.add('explosion-star');
    star.style.width = size + 'px';
    star.style.height = size + 'px';
    star.style.left = x + 'px';
    star.style.top = y + 'px';
    star.style.filter = `drop-shadow(0 0 12px ${color})`;
    document.body.appendChild(star);
    return star;
  }

  function createDesktopStarburst() {
    const barRect = loadingBar.getBoundingClientRect();
    const centerX = barRect.left + barRect.width / 2;
    const centerY = barRect.top + barRect.height / 2;

    explosionStars = [];
    const totalStars = 50;
    for (let i = 0; i < totalStars; i++) {
      const angle = (i / totalStars) * 2 * Math.PI + (Math.random() - 0.5) * 0.5;
      const distance = 100 + Math.random() * Math.min(w, h) * 0.6;
      const star = createExplosionStar(centerX, centerY, 6 + Math.random() * 4, '#fff');
      explosionStars.push({
        element: star,
        angle,
        distance,
        currentDistance: 0,
        phase: 'expanding',
        centerX,
        centerY
      });
    }

    let phase = 'expanding';
    let startTime = performance.now();

    function animate(time) {
      const elapsed = time - startTime;
      if (phase === 'expanding' && elapsed > 600) {
        phase = 'retracting';
        const screenCenterX = w / 2;
        const screenCenterY = h / 2;
        explosionStars.forEach(s => {
          s.centerX = screenCenterX;
          s.centerY = screenCenterY;
          s.phase = 'retracting';
        });
        startTime = time;
      }
      else if (phase === 'retracting' && elapsed > 500) {
        phase = 'done';
        cleanupExplosionStars();
        showLogoAndText();
        animateLivingStarfield();
        return;
      }

      explosionStars.forEach(s => {
        if (phase === 'expanding') {
          const progress = Math.min(elapsed / 600, 1);
          s.currentDistance = progress * s.distance;
        } else if (phase === 'retracting') {
          const progress = Math.min(elapsed / 500, 1);
          s.currentDistance = s.distance * (1 - progress);
        }

        const x = s.centerX + Math.cos(s.angle) * s.currentDistance;
        const y = s.centerY + Math.sin(s.angle) * s.currentDistance;
        s.element.style.left = x + 'px';
        s.element.style.top = y + 'px';
        s.element.style.opacity = phase === 'done' ? '0' : '1';
      });

      if (phase !== 'done') {
        requestAnimationFrame(animate);
      }
    }

    requestAnimationFrame(animate);
  }

  function cleanupExplosionStars() {
    explosionStars.forEach(s => {
      if (s.element.parentNode) s.element.parentNode.removeChild(s.element);
    });
    explosionStars = [];
  }

  // Fade in logo and text for both versions
  function showLogoAndText() {
    logoWrapper.style.opacity = '1';
    // Float logo to top center after a delay
    setTimeout(() => {
      logoWrapper.classList.add('float-top');
    }, 700);

    setTimeout(() => {
      constructionText.classList.add('visible');
    }, 2000);
  }

  // Fade out loader (mobile)
  function fadeOutLoader() {
    loader.style.transition = 'opacity 0.8s ease';
    loader.style.opacity = '0';
    setTimeout(() => {
      loader.style.display = 'none';
    }, 900);
  }

  // Main loading animation logic
  function runLoading() {
    // Simulated loading speed
    const loadingSpeed = 0.4; // percent per frame approx (adjust for total ~8 seconds)

    function step() {
      progress += loadingSpeed;
      if (progress > 100) progress = 100;

      // Update bar width
      barFill.style.width = progress + '%';

      // Update ARIA progress
      updateAriaProgress();

      // Sync glow letters
      updateLetterGlow();

      if (progress < 100) {
        requestAnimationFrame(step);
      } else {
        // Loading complete

        if (isMobile) {
          // Mobile version fade out loader then fade in starfield + logo + text
          fadeOutLoader();

          setTimeout(() => {
            initStarfield(100);
            animateLivingStarfield();
            showLogoAndText();
          }, 1000);

        } else {
          // Desktop version starburst/shatter effect replacing bar + text
          // Hide loading text & bar fill so starburst can happen visually
          loadingText.style.opacity = '0';
          barFill.style.opacity = '0';

          createDesktopStarburst();
        }
      }
    }
    step();
  }

  // Initialize
  runLoading();

  // Resize handler to keep starfield star coords updated
  window.addEventListener('resize', () => {
    stars.forEach(s => {
      s.x = (Math.random() - 0.5) * window.innerWidth * 1.5;
      s.y = (Math.random() - 0.5) * window.innerHeight * 1.5;
      s.z = window.innerWidth + Math.random() * window.innerWidth;
    });
  });
})();
</script>

</body>
</html>
